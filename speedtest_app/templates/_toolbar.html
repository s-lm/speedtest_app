{% macro toolbar(user=None, ENABLE_OIDC=False) %}
<div id="top-bar">
    <div>
        <h1>Speedtest App</h1>
    </div>
    <div style="display:flex;align-items:center;gap:0.5rem;">
        <div class="toolbar-dropdown">
            <button class="toolbar-dropbtn" aria-haspopup="true" aria-expanded="false">
                {% if ENABLE_OIDC and user %}
                <img src="{{ user.picture }}" alt="User Picture" class="toolbar-usericon">
                <span>{{ user.preferred_username or user.name or user.email }}</span>
                {% else %}
                <img src="{{ url_for('static', filename='img/generic-user.svg') }}" alt="User" class="toolbar-usericon">
                <span>Guest</span>
                {% endif %}
                <span class="toolbar-caret">â–¼</span>
            </button>
            <div class="toolbar-dropdown-content">
                <button id="themeToggle" type="button"><span class="theme-icon">ðŸŒ™</span> Toggle Theme</button>
                {% if ENABLE_OIDC and user %}
                <a href="{{ url_for('routing.logout') }}">ðŸšª Logout</a>
                {% elif ENABLE_OIDC %}
                <a href="{{ url_for('routing.login') }}">ðŸ”‘ Login</a>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endmacro %}